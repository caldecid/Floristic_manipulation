}
library(tidyverse)
library(expowo)
for(i in 18:length(powo_fam)){
##filetring family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind", list_genus)
}
View(list_genus)
list_genus[[39]]
library(plyr)
x = do.call("rbind.fill", list_genus)
View(x)
list_expowo[[18]]
list_expowo[[18]] = x
list_expowo[[18]]
View(list_expowo)
save(list_expowo, file = "Data/Metadata/Angiosperms/expowo/list_expowo.RData")
View(list_expowo)
library(tidyverse)
library(expowo)
library(plyr)
powo_fam
powo_fam[18]
for(i in 19:length(powo_fam)){
##filetring family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
View(list_expowo)
powo_fam[19]
powo_fam[20]
for(i in 20:length(powo_fam)){
##filetring family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
save(list_expowo, file = "Data/Metadata/Angiosperms/expowo/list_expowo.RData")
save(list_expowo, file = "Data/Metadata/Angiosperms/expowo/list_expowo.RData")
save(list_expowo, file = "Data/Metadata/Angiosperms/expowo/list_expowo.RData")
View(list_expowo)
save(list_expowo, file = "Data/Metadata/Angiosperms/expowo/list_expowo1.RData")
library(writexl)
pow_fam[19]
powo_fam
powo_fam
powo_fam[19]
paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[1], ".csv")
for(i in 1:19){
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
}
library(tidyverse)
library(expowo)
library(plyr)
View(list_expowo)
length(powo_fam)
length(list_expowo)
powo_fam <- unique(df_powo_families$family)
length(list_expowo)
length(powo_fam)
for(i in 1:19) {
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
}
library(writexl)
for(i in 1:19) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
}
for(i in 1:19) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
print(powo_fam[i])
}
powo_fam[11]
powo_fam[10]
for(i in 12:19) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
print(powo_fam[i])
}
write_xlsx(list_expowo[[11]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[11], ".csv"))
write_csv(list_expowo[[11]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[11], ".csv"))
for(i in 1:19) {
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".xlsx"))
print(powo_fam[i])
}
for(i in 1:19) {
write_xlsx(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".xlsx"))
print(powo_fam[i])
}
for(i in 1:19) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".xlsx"))
print(powo_fam[i])
}
for(i in 12:19) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".xlsx"))
print(powo_fam[i])
}
##xlsx has some limits
write_csv(list_expowo[[11]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[11], ".xlsx"))
powo_fam[11]
##xlsx has some limits
write_csv(list_expowo[[11]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[11], ".csv"))
powo_fam <- unique(df_powo_families$family)
list_expowo <- vector("list", length = length(powo_fam))
names(list_expowo) = powo_fam
length(list_expowo)
for(i in 20:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
}
library(plyr)
for(i in 20:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
powo_fam[i], ".csv"))
}
View(list_fam_powo)
for(i in 20:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
View(list_expowo)
which(powo_fam== "Picrodendraceae")
which(powo_fam== "Brassicaceae")
which(names(list_expowo)== "Brassicaceae")
which(names(list_expowo)== "Picrodendraceae")
list_expowo[["Chrysobalanaceae"]]
list_expowo[["Brassicaceae"]]
unique(list_expowo[[21]]$family)
list_expowo <- list_expowo[-which(sapply(list_expowo, is.null))]
View(list_expowo)
for(i in seq_along(list_expowo)){
names(list_expowo[[i]]) == unique(list_expowo[[i]]$family)
}
View(list_expowo)
list_expowo[["Brassicaceae"]]$family
library(writexl)
getwd()
for(i in seq_along(list_expowo)) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
for(i in seq_along(list_expowo)) {
write_csv(list_expowo[[i]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
save(list_expowo, file = "Data/list_expowo.RData")
View(list_expowo)
View(list_expowo)
library(writexl)
for(i in seq_along(list_expowo)) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
##xlsx has some limits
write_csv(list_expowo[[1]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[1]]$family), ".csv"))
library(tidyverse)
##xlsx has some limits
write_csv(list_expowo[[1]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[1]]$family), ".csv"))
for(i in 2:length(list_expowo)) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
for(i in seq_along(list_expowo)){
x[i] = unique(list_expowo[[i]]$family)
}
x = vector("vector", length = length(list_expowo))
x = vector(mode = "character", length = length(list_expowo))
for(i in seq_along(list_expowo)){
x[i] = unique(list_expowo[[i]]$family)
}
x
sapply(list_expowo, dim(x)[1]!= 0)
dim(list_expowo[[1]])
dim(list_expowo[[1]])[1]
dim(list_expowo[[1]])[1] != 0
list_expowo <- list_expowo[-which(sapply(list_expowo, fun(x) dim(x)[1] == 0))]
sapply(list_expowo, fun(x)dim(x[1]==0)
lapply(list_expowo, fun(x)dim(x[1]==0)
?sapply
f2 <-
list_expowo <- list_expowo[-which(sapply(list_expowo,
function(x) dim(x)[1] == 0))]
View(list_expowo)
for(i in seq_along(list_expowo)){
x[i] = unique(list_expowo[[i]]$family)
}
x
x = vector(mode = "character", length = length(list_expowo))
for(i in seq_along(list_expowo)){
x[i] = unique(list_expowo[[i]]$family)
}
which(x== "Hypericaceae")
names(list_expowo) <- x
View(list_expowo)
View(list_expowo[["Phyllanthaceae"]])
View(list_expowo[["Lacistemataceae"]])
for(i in 44:length(list_expowo)) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
##xlsx has some limits
write_csv(list_expowo[[44]],
file = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[44]]$family), ".csv"))
x[44]
for(i in 45:length(list_expowo)) {
write_xlsx(list_expowo[[i]],
path = paste0("Data/Metadata/Angiosperms/expowo/expowo_syn/",
unique(list_expowo[[i]]$family), ".xlsx"))
print(unique(list_expowo[[i]]$family))
}
View(list_expowo)
which(powo_fam == "Phyllanthaceae")
length(powo_fam)
powo_fam
list_expowo2 = list_expowo
list_expowo <- vector("list", length = length(powo_fam) - length(list_expowo2))
list_expowo
View(list_expowo)
which(powo_fam == "Phyllantaceae")
which(powo_fam == "Phyllanthaceae")
list_expowo <- vector("list", length = length(powo_fam) -99)
length(powo_man)
length(powo_fam)
names(list_expowo) = powo_fam[100:142]
powo_fam[100:142]
df_powo_families
library(expowo)
library(plyr)
View(list_expowo)
for(i in 100:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
library(tidyverse)
library(expowo)
library(plyr)
View(list_expowo2)
View(list_expowo)
for(i in 100:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
library(expowo)
for(i in 100:length(powo_fam)){
##filtering family
fam_powo = df_powo_families %>% filter(family == powo_fam[i])
##extracting genus
powo_genus = unique(fam_powo$genus)
list_genus <- vector("list", length = length(powo_genus))
for(j in seq_along(powo_genus)){
##implementing expowo
tryCatch({
##calling the species within families and genus in POWO
expowo_df = powoSpecies(family = powo_fam[i],
genus = powo_genus[j],
hybrid = TRUE,
synonyms = TRUE,
country = "Brazil")
#arranging taxa names
expowo_df$taxon_name = str_replace(expowo_df$taxon_name, " ", "_")
#POWO species absent in Flora de Brasil
list_genus[[j]]=
expowo_df[-which(expowo_df$taxon_name %in% angiosperms_bra$taxon_name), ]
return(list_genus[[j]])
}, error = function(e){
message("Absent genus in POWO")
print(e)
})
}
list_expowo[[i]] = do.call("rbind.fill", list_genus)
}
expowo_df = powoSpecies(family = "Achariaceae"
hybrid = TRUE,
expowo_df = powoSpecies(family = "Achariaceae",
hybrid = TRUE,
synonyms = TRUE,
country = "Bolivia")
